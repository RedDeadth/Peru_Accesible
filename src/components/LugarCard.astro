---
// src/components/LugarCard.astro
interface Props {
  lugar: {
    id: number;
    nombre: string;
    descripcion: string;
    direccion: string;
    ciudad: string;
    region: string;
    tipo: string;
    certificadoYapaykuy: boolean;
    rampaAcceso: boolean;
    banioAdaptado: boolean;
    estacionamientoAccesible: boolean;
    senaleticaBraille: boolean;
    audioguia: boolean;
    personalCapacitado: boolean;
    telefono?: string;
    email?: string;
    sitioWeb?: string;
    imagenUrl?: string;
  };
}

const { lugar } = Astro.props;

// Mapeo de tipos a emojis
const tipoEmojis: Record<string, string> = {
  hotel: '🏨',
  restaurante: '🍽️',
  comercio: '🛍️',
  cultura: '🎨',
  salud: '🏥',
  educacion: '📚',
  transporte: '🚌',
  recreacion: '🎪',
};

// Mapeo de tipos a colores
const tipoColores: Record<string, string> = {
  hotel: 'blue',
  restaurante: 'orange',
  comercio: 'purple',
  cultura: 'pink',
  salud: 'red',
  educacion: 'green',
  transporte: 'indigo',
  recreacion: 'yellow',
};

const emoji = tipoEmojis[lugar.tipo] || '📍';
const color = tipoColores[lugar.tipo] || 'gray';
---

<div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition transform hover:-translate-y-1 border-4 border-amber-200">
  <!-- Imagen -->
  <div class="relative h-48 bg-gray-200">
    {lugar.imagenUrl ? (
      <img 
        src={lugar.imagenUrl} 
        alt={lugar.nombre}
        class="w-full h-full object-cover"
      />
    ) : (
      <div class="w-full h-full flex items-center justify-center text-6xl">
        {emoji}
      </div>
    )}
    
    <!-- Badge de Certificación Yapaykuy -->
    {lugar.certificadoYapaykuy && (
      <div class="absolute top-3 right-3 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-semibold flex items-center gap-1">
        <span>✓</span> Yapaykuy
      </div>
    )}
    
    <!-- Badge de Tipo -->
    <div class={`absolute top-3 left-3 bg-${color}-500 text-white px-3 py-1 rounded-full text-sm font-semibold capitalize`}>
      {emoji} {lugar.tipo}
    </div>
  </div>

  <!-- Contenido -->
  <div class="p-6">
    <h3 class="font-bold text-xl mb-2">{lugar.nombre}</h3>
    
    <!-- Ubicación -->
    <div class="flex items-start gap-2 text-sm text-gray-500 mb-4">
      <span>📍</span>
      <div>
        <div>{lugar.direccion}</div>
        <div>{lugar.ciudad}, {lugar.region}</div>
      </div>
    </div>

    <!-- Características de Accesibilidad -->
    <div class="border-t pt-4">
      <div class="text-sm font-semibold text-gray-700 mb-2">Características de Accesibilidad:</div>
      <div class="flex flex-wrap gap-2">
        {lugar.rampaAcceso && (
          <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">
            ♿ Rampa
          </span>
        )}
        {lugar.banioAdaptado && (
          <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded">
            🚻 Baño Adaptado
          </span>
        )}
        {lugar.estacionamientoAccesible && (
          <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">
            🅿️ Estacionamiento
          </span>
        )}
        {lugar.senaleticaBraille && (
          <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded">
            👁️ Braille
          </span>
        )}
        {lugar.audioguia && (
          <span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded">
            🎧 Audioguía
          </span>
        )}
        {lugar.personalCapacitado && (
          <span class="bg-indigo-100 text-indigo-800 text-xs px-2 py-1 rounded">
            👨‍🏫 Personal Capacitado
          </span>
        )}
      </div>
    </div>

    <!-- Contacto -->
    {(lugar.telefono || lugar.email || lugar.sitioWeb) && (
      <div class="border-t pt-4 mt-4">
        <div class="text-sm space-y-1">
          
          {lugar.sitioWeb && (
            <div class="flex items-center gap-2 text-gray-600">
              <span>🌐</span>
              <a 
                href={lugar.sitioWeb} 
                target="_blank" 
                rel="noopener noreferrer"
                class="hover:text-blue-600"
              >
                Visitar sitio web
              </a>
            </div>
          )}
        </div>
      </div>
    )}
  </div>
</div>